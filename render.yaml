services:
  - type: web
    name: nba-dashboard
    env: python
    buildCommand: |
      echo "Starting build process..."
      echo "Current directory contents before build:"
      ls -la
      chmod +x build.sh
      ./build.sh
      echo "Verifying data file in deploy directory:"
      ls -la deploy/
      cat deploy/PlayerIndex_nba_stats.csv | head -n 5
    startCommand: |
      echo "Starting application in $(pwd)"
      cd deploy
      echo "Deployment directory contents:"
      ls -la
      echo "First few lines of CSV file:"
      head -n 5 PlayerIndex_nba_stats.csv
      echo "Starting Gunicorn server..."
      gunicorn nba_dashboard:server -b 0.0.0.0:$PORT --log-level debug
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: PYTHONUNBUFFERED
        value: "true"
      - key: DATA_DIR
        value: "/opt/render/project/src/deploy" 